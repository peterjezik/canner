(function(e){e.fn.canner=function(t){return this.each(function(){var n=e(this);n.keydown(function(e){if(e.which==9){var r=n.val();var i="";var s=privateMethods.getCaretPosition(n[0]);var o=last_position=s-1;while(r[o]!=" "&&r[o]!="\n"&&r[o]!="\r"&&o>=0){i=r[o]+i;o--}if(i!=""){for(shortcut in t){if(shortcut==i){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}var u=t[shortcut];var a=r.substring(0,o+1);var f=r.substring(last_position+1);var l=a+u+f;n.val(l);var c=o+u.length+1;privateMethods.setCaretPosition(n[0],c);break}}}}})})};privateMethods={getCaretPosition:function(e){if(typeof e.selectionStart=="number"){return e.selectionStart}else if(document.selection){e.focus();var t=document.selection.createRange();if(t==null){return 0}var n=e.createTextRange(),r=n.duplicate();n.moveToBookmark(t.getBookmark());r.setEndPoint("EndToStart",n);return r.text.length}return 0},setCaretPosition:function(e,t){if(typeof e.selectionStart=="number"){e.selectionStart=e.selectionEnd=t}else if(typeof e.createTextRange!="undefined"){e.focus();var n=e.createTextRange();n.move("character",t);n.collapse(false);n.select()}}}})(jQuery)